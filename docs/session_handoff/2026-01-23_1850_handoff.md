# Session Handoff: Debugging Silent Docker Failure

Read this file to continue troubleshooting.

## The Critical Issue
- **Symtom**: The Leads Command Center UI shows jobs as "running" (with a LIVE badge), but **no Docker containers are running**.
- **Evidence**:
  - Browser Test: Confirmed UI shows "running".
  - User Evidence: Docker Desktop screenshot shows "No containers are running".
  - Terminal: `docker ps` returns empty.

## Current State
- **Code**: `src/lib/docker.ts` was patched to fix the DSN injection bug (verified).
- **Database**: Creating a job *does* insert a record into Supabase (proven by the UI showing it).
- **Environment**: Docker Desktop is running.

## proven Diagnosis
The issue is **Silent Crash + Auto-Removal**.
1. `docker run -d` starts the container and returns exit code 0 immediately (success).
2. The API sees success and sets job status to `running`.
3. The container crashes immediately (likely due to the DSN or flag issue).
4. Because we use the `--rm` flag, Docker **deletes the container immediately upon exit**.
5. Result: UI thinks it's running, but the container is gone (and no logs are preserved).

## Required Fix & Debugging Steps
1.  **Modify `src/lib/docker.ts`**: Temporarily **remove the `--rm` flag** (line 123).
    ```typescript
    // BEFORE: 'run', '-d', '--name', ..., '--rm'
    // AFTER:  'run', '-d', '--name', ...
    ```
2.  **Repro**: Create a new job.
3.  **Inspect**: Run `docker ps -a`. You will now see the `Exited` container.
4.  **Logs**: Run `docker logs <container_id>` to see the actual error message.


## Files of Interest
- `src/lib/docker.ts`: The spawning logic.
- `src/app/api/jobs/route.ts`: The API handler.

## Project Location
`d:\Websites\GMaps_scraper_gosom\leads-command-center`
