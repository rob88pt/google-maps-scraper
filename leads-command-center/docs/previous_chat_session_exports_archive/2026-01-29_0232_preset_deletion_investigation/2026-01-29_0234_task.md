# Task List

- [/] Research & Planning Advanced Filtering
  - [ ] Analyze current filtering implementation in `LeadsTable` and `leads/route.ts`
  - [ ] Research column ordering implementation (likely using `tanstack-table`)
  - [ ] Design the Search-and-Filter Template system
- [ ] Implement Enhanced Filtering
  - [x] Add "Filter Search" to popover
- [x] Implement Search-and-Filter Presets (Templates)

  - [x] Create Database schema with multi-user RLS
  - [x] Implement Save/Load functionality for full UI state
  - [x] Add Preset Manager UI (Save/Load/Delete)

- [x] Refine Preset Management UX
  - [x] Add deletion confirmation dialog
  - [x] Enhance empty state message with helpful hint
  - [x] Add search box to preset dropdown
  - [x] Implement active selection highlighting in dropdown
  - [x] Ensure robust state sync when active preset is deleted

- [x] Implement Visual Feedback for Active States
  - [x] Add active indicator to Category filter
  - [x] Add active indicator to Presets button when a preset is applied

- [x] Fix Preset visual feedback race condition
  - [x] Prevent drift detection from clearing name during application
  - [x] Verify highlighting logic in dropdown
- [ ] Investigate mystery preset deletion
  - [x] Analyze API and hook logic for bugs
  - [x] Check database triggers and RLS policies
  - [x] Add server-side logging to catch future occurrences
- [x] Verification and Testing
